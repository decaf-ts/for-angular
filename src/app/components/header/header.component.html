<ion-header [translucent]="translucent" [class]="className + ' ' + backgroundColor">
  <div [class]="{'dcf-header-container': center, 'dcf-width-expand': expand}">
    <ion-toolbar [color]="backgroundColor">
      @if(showMenuButton && (currentOperation === OperationKeys.READ && !modelId)) {
        <ion-buttons [slot]="showBackButton ? 'end' : buttonMenuSlot">
          <ion-menu-button >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 12H15M3 6H21M3 18H21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </ion-menu-button>
        </ion-buttons>
      }

      @if(showBackButton) {
        <ion-buttons [slot]="(!showMenuButton || (modelId && ![OperationKeys.READ,  OperationKeys.UPDATE].includes(currentOperation))) ?  'end' : 'start'">
          <app-back-button [link]="backButtonLink"  [locale]="locale" [toolbarColor]="backButtonColor"></app-back-button>
        </ion-buttons>
      }
      <ng-content select="[slot='start']"></ng-content>

      @if(title) {
        <ion-title class="ion-text-{{titleAligment}}">{{ locale ? (title | translate) : title }}</ion-title>
      }

      <ng-content select="[slot='end']"></ng-content>

      @if(operations?.length && route && (currentOperation === OperationKeys.READ)) {
        <ion-buttons slot="end">
          @if(!modelId && isAllowed(OperationKeys.CREATE)) {
            <ion-button (click)="changeOperation(OperationKeys.CREATE)" fill="clear" [title]="'create' | translate ">
              <ion-icon aria-hidden="true" name="save-outline" slot="icon-only"></ion-icon>
            </ion-button>
          } @else {

            @if(isAllowed(OperationKeys.READ)) {
              <ion-button (click)="changeOperation(OperationKeys.READ)" fill="clear"  [title]="'read' | translate ">
                <ion-icon aria-hidden="true" name="folder-open-outline"  slot="icon-only"></ion-icon>
              </ion-button>
            }

            @if(isAllowed(OperationKeys.UPDATE)) {
              <ion-button (click)="changeOperation(OperationKeys.UPDATE)" fill="clear"  [title]="'update' | translate ">
                <ion-icon aria-hidden="true" name="create-outline"  slot="icon-only"></ion-icon>
              </ion-button>
            }

            <!-- @if(isAllowed('delete')) {
              <ion-button (click)="changeOperation('delete')" fill="clear" [title]="'delete' | translate ">
                <ion-icon aria-hidden="true" name="trash-bin-outline" color="danger" slot="icon-only"></ion-icon>
              </ion-button>
            } -->
          }
        </ion-buttons>
      }
    </ion-toolbar>
  </div>
</ion-header>

