
@if (title || description) {
  <ion-item-sliding>
    <ion-item
      [id]="uid"
      [lines]="lines"
      [button]="!operations?.length ? false : button"
      [class]="className"
      (click)="operations?.includes('read') ? handleAction('read', $event, component) : ''"
      #component
    >
      @if (icon && lines !== 'inset') {
        <div class="dcf-icon" [slot]="iconSlot">
          <ion-avatar>
            <ion-icon aria-hidden="true" name="reader-outline" size="default" />
          </ion-avatar>
        </div>
      }
      <div class="dcf-width-expand">
        <div class="dcf-flex dcf-flex-middle dcf-grid-collapse" dcf-grid>
          @if (icon && lines === 'inset') {
            <div class="dcf-icon dcf-grid-icon">
              <ion-avatar>
                <ion-icon aria-hidden="true" name="reader-outline" size="default" />
              </ion-avatar>
            </div>
          }
          <div class="dcf-width-expand@s dcf-width-1-1 dcf-label">
            @if (title) {
              <ion-label class="dcf-item-title">
                {{ uid !== title ? (uid + ' - ' + title) : title }}
              </ion-label>
            }
            @if (description) {
              <div class="dcf-description" [innerHTML]="description"></div>
            }
          </div>
          @if (info || subinfo) {
            <div class="dcf-width-auto@s dcf-width-expand dcf-info dcf-flex dcf-flex-right@s">
              <div>
                @if (info) {
                <span  [innerHTML]="info"></span>
                }
                @if (subinfo) {
                  <div class="dcf-subinfo dcf-text-truncate" [innerHTML]="subinfo" ></div>
                }
              </div>
            </div>
          }

          <div class="dcf-width-auto dcf-flex dcf-flex-middle dcf-flex-right">
            @if ((operations?.includes(OperationKeys.DELETE) || operations?.includes(OperationKeys.UPDATE)) && uid) {
              <div class="dcf-visible@s" id="dcf-actions">
                @if(actionsType === 'popover') {
                  <ion-button class="" shape="round" fill="clear" color="primary" (click)="presentActionsMenu($event)">
                    <ion-icon slot="icon-only" aria-hidden="true" name="ellipsis-vertical-outline" />
                  </ion-button>
                  <ion-popover
                    #actionMenuComponent
                    side="bottom"
                    alignment="left"
                    [isOpen]="actionMenuOpen"
                    (didDismiss)="actionMenuOpen = false">
                    <ng-template>
                      <ion-content class="ion-padding">
                        <ion-list lines="none">
                          <ion-list-header>
                            <h4 class="dcf-text-capitalize" [innerHTML]="'actions' | translate"></h4>
                          </ion-list-header>
                          @for (operation of [OperationKeys.UPDATE, OperationKeys.DELETE]; track operation) {
                            @if (operations?.includes(operation)) {
                            <ion-item button="true" (click)="handleAction(operation, $event, component)">
                              <div slot="start">
                              @if (operation === OperationKeys.UPDATE) {
                                  <ngx-decaf-icon name="assets/images/icons/edit.svg" />
                                } @else {
                                  <ngx-decaf-icon color="danger" name="assets/images/icons/trash.svg" />
                                }
                              </div>
                              <ion-label class="dcf-text-capitalize">{{ operation | translate }}</ion-label>
                            </ion-item>
                            }
                          }
                        </ion-list>
                      </ion-content>
                    </ng-template>
                  </ion-popover>
                } @else {
                  <div class="dcf-grid-actions dcf-grid dcf-grid-small dcf-flex  dcf-flex-space-between">
                    @for (operation of [OperationKeys.UPDATE, OperationKeys.DELETE]; track operation) {
                      <div tabindex="0" (keydown.enter)="handleAction(operation, $event, component)" (click)="handleAction(operation, $event, component)">
                        @if (operations?.includes(operation)) {
                          <ion-button fill="clear" shape="round">
                            @if (operation === OperationKeys.UPDATE) {
                              <ngx-decaf-icon name="assets/images/icons/edit.svg" />
                            } @else {
                              <ngx-decaf-icon color="danger" name="assets/images/icons/trash.svg" />
                            }
                          </ion-button>
                        }
                      </div>
                    }
                  </div>
                }

              </div>
            }
            @if (windowWidth > 639) {
              <div id="end">
                <ng-content select="[slot='end']"></ng-content>
              </div>
            }
          </div>
        </div>
      </div>
    </ion-item>
    @if (showSlideItems && uid) {
      <ion-item-options side="end" (ionSwipe)="operations.length === 1 ? handleAction(operations[0],  $event, component) : ''">
        @if (operations?.includes(OperationKeys.UPDATE)) {
          <ion-item-option class="dcf-update" (click)="handleAction(OperationKeys.UPDATE, $event, component)" [expandable]="operations.length === 1">
            <ion-icon aria-hidden="true" slot="icon-only" name="create-outline" />
          </ion-item-option>
        }
        @if (operations?.includes(OperationKeys.DELETE)) {
        <ion-item-option class="dcf-delete" (click)="handleAction(OperationKeys.DELETE,  $event, component)" [expandable]="operations.length === 1">
            <ion-icon aria-hidden="true" slot="icon-only" name="trash" />
          </ion-item-option>
        }
      </ion-item-options>
    }
  </ion-item-sliding>
}
