
@if(showRefresher) {
  <ion-refresher slot="fixed" [pullFactor]="1" [pullMin]="100" [pullMax]="200" (ionRefresh)="forceRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
}

@if(showSearchbar) {
  <ngx-decaf-searchbar [emitEventToWindow]="false" [debounce]="500" (searchEvent)="handleSearch($event)" />
}

@if(data?.length) {
  <ion-list [inset]="inset" [lines]="lines" #component>
    @if(item?.tag) {
      @for(child of items; track child) {
        <ngx-decaf-ui-element
          [tag]="item.tag"
          (listenEvent)="handleEvent($event)"
          [globals]='{
            item: child,
            mapper: mapper,
            route: route
          }'>
          </ngx-decaf-ui-element>
        }
    } @else {
      <ng-content></ng-content>
    }
  </ion-list>
  @if(loadMoreData) {
    <ion-infinite-scroll
      [class]="searchValue?.length ? 'dcf-hidden' : ''"
      [position]="scrollPosition"
      [threshold]="scrollThreshold"
      (ionInfinite)="forceRefresh($event)">
      <ion-infinite-scroll-content [loadingSpinner]="loadingSpinner" [loadingText]="loadingText"></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  }
} @else {

  @if(refreshing) {
    <ion-item *ngFor="let skl of skeletonData">
      <ion-thumbnail slot="start">
        <ion-skeleton-text [animated]="true"></ion-skeleton-text>
      </ion-thumbnail>
      <ion-label>
        <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        <ion-text class="date" style="width: 20%;"><ion-skeleton-text [animated]="true"></ion-skeleton-text></ion-text>
      </ion-label>
    </ion-item>
  } @else {
    @if(!searchValue?.length) {
      <ngx-decaf-empty-state
        [locale]="locale"
        [title]="emptyTitle"
        [subtitle]="emptySubtitle"
        [icon]="emptyIcon"
        [buttonText]="emptyButtonText"
        [buttonLink]="emptyButtonLink" />
    } @else {
      <ngx-decaf-empty-state
        icon="search-outline"
        ngClass="empty-search"
        [translatable]="true"
        title="search.title"
        subtitle="search.subtitle"
        [searchValue]="searchValue"
      />
    }
  }
}

