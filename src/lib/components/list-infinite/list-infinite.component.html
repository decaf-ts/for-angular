
@if(showRefresher) {
  <ion-refresher slot="fixed" [pullFactor]="1" [pullMin]="100" [pullMax]="200" (ionRefresh)="forceRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
}

@if(showSearchbar) {
  <ngx-decaf-searchbar
    [emitEventToWindow]="false"
    [debounce]="500"
    (searchEvent)="handleSearch($event)"
    >
  </ngx-decaf-searchbar>
}

@if(data?.length) {
    <ion-list
      [inset]="inset"
      [lines]="lines"
      #component
    >
      @if(propsItem?.render) {
        @for(item of items; track item['modelId']) {
          <ngx-decaf-list-item
            [locale]="locale"
            [mapper]="propsItem?.mapper"
            [icon]="item?.['icon']"
            [iconSlot]="item?.['iconSlot'] || 'start'"
            [modelOperations]="item?.['modelOperations']"
            [modelPk]="item?.['modelPk']"
            [modelPage]="item?.['modelPage']"
            [modelId]="item?.['modelId']"
            [title]="item?.['title']"
            [subtitle]="item?.['subtitle']"
            [info]="item?.['info']"
            [subinfo]="item?.['subinfo']"
            [translateProps]="item?.['translateProps']"
            (clickEvent)="handleItemAction($event)"
            #component
          />
        }
      } @else {
        <ng-content></ng-content>
      }
    </ion-list>
    @if(loadMoreData) {
      <ion-infinite-scroll
        [class]="searchValue?.length ? 'dcf-hidden' : ''"
        [position]="scrollPosition"
        [threshold]="scrollThreshold"
        (ionInfinite)="forceRefresh($event)">
        <ion-infinite-scroll-content [loadingSpinner]="loadingSpinner" [loadingText]="loadingText"></ion-infinite-scroll-content>
      </ion-infinite-scroll>
    }
} @else {
  @if(refreshing) {
    <ion-item *ngFor="let skl of skeletonData">
      <ion-thumbnail slot="start">
        <ion-skeleton-text [animated]="true"></ion-skeleton-text>
      </ion-thumbnail>
      <ion-label>
        <ion-skeleton-text [animated]="true"></ion-skeleton-text>
        <ion-text class="date" style="width: 20%;"><ion-skeleton-text [animated]="true"></ion-skeleton-text></ion-text>
      </ion-label>
    </ion-item>
  } @else {
    @if(!searchValue?.length) {
      <ngx-decaf-empty-state
        [locale]="locale"
        [title]="emptyTitle"
        [subtitle]="emptySubtitle"
        [icon]="emptyIcon"
        [buttonText]="emptyButtonText"
        [buttonLink]="emptyButtonLink" />
    } @else {
      <ngx-decaf-empty-state
        icon="search-outline"
        ngClass="empty-search"
        [translatable]="false"
        [title]="searchEmptyTitle"
        [subtitle]="searchEmptySubtitle" />
    }
  }
}

